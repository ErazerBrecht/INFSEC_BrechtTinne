# 08/01/2016

## Putting it all together!
Vandaag is de laatste dag dat we echt extra's gaan toevoegen! We hebben bijna een volledig dag de tijd. Het project wordt vandaag gefinaliseerd!

## WiFi script
We hebben dit nog gefinetuned. Het was ook de eerste keer dat we dit script testen op onze 'nieuwe' Raspberry Pi (Aka Brecht's laptop).
Er moest nog gezorgd worden dat we onze gegeneerde log met IV's na x aantal tijd gebruikt wordt om het wachtwoord te kraken.

Voorlopig deden we deze stap altijd handmatig. 
Dit omdat het op onze Raspberry Pi geen vaste tijd op geplakt kon worden voor we aan minstens 10000 data pakketjes gecaptured hadden.
Bij de laptop ging dit merkbaar sneller (waarom leest u verder), en waren 2 minuten wachten meer dan voldoende!

We hebben eerst alle files van vorige sessies verwijderd. Zo zijn we 100% zeker dat we het wachtwoord kraken van deze sessie. 
We starten onze hack op (aireplay, airodump, ...).

Hierna wachten we dus twee minuten (sleep 120) en beginnen dan aan aircrack-ng. We vangen de output van dit commando via 'Tee' (lees verder wat dit is). En schrijven dit naar een file 'password.txt'.
Het groote probleem is dat onze geopende venster die de data aan het 'vangen' zijn, op blijven staan. We weten niet hoe we deze moeten sluiten vanuit ons script.
Het is belangrijk dat je deze elke keer sluit voor je aan een nieuwe hack sessie begint!

Nu roepen we ons email script aan (zie volgende paragraaf)!

### Tee?
'Tee' is een functie in Linux waarbij je de output van je executable (script, programma, ...) kunt schrijven naar een file. Hoe doet 'Tee' dit?

> ls -l | tee output.txt

ls -l is ons programma dat schrijft naar stdout (uitgang 'UI' -> Scherm, SSH sessie, ...). Tee "vangt" deze uitgang en zal deze schrijven naar de file output.txt. Indien gewenst kan dit ook nog verder gestuurd worden naar een stdin (input). De file wordt trouwens elke keer overschreden!

'|' is trouwens het 'pipe' symbool. Piping is een belangrijk concept in de Linux wereld. Piping is eigenlijk het doorsturen van data. Je vangt de output van een bepaald commando en stuurt het ineens door naar de input van een ander commando! En makkelijk voorbeeld is:

> \# cat /proc/cpuinfo | grep -i 'Model'.

Je zult het 'grep' commnado direct uitvoeren op de output van het 'cat' commando! Dit laat trouwens de modelnaam van je CPU zien!

### Oplossing!?
Toen we onze opstelling aan het bouwen waren, was ik (Brecht) vergeten de antenne erop te draaien (we maakten voor de verandering eens gebruik van mijn groote antenne). We hebben dit nooit doorgehad.

Nadat we besloten te pauzeren viel het me ineens op dat de antenne er gewoon naast lag. Ik heb ze erop gedraaid en we vonden direct veel meer SSID's (rond de 15 keer AP Wifi / Eduroam, hiervoor was dit max 3 van elks)...

We testen ons script nog eens en het viel direct op dat de gevangen data veel trager optelde. Het probleem waar we al weken met sukkelden. Ik draai de antenne er terug af en de snelheid waarmee we data vangen wordt ineens een pak groter!

We hebben dus een omgekeerd evenredig verband tussen signaal sterkte en 'data vangen'. Dit is zeer raar. Onze enigste verklaring is dat we zoveel access points ontvangen dat het dus moeilijk wordt... </br>
We zijn zelf ook niet zeker, het is een raar fenomeen maar het gebeurd. Hier zouden we eigenlijk eens meer onderzoek achter moeten doen. Maar het project is zo goed als afgelopen. Ondanks zijn we blij dat we dit ontdenkt hebben, dit zal de live demo zeker versnellen!

## E-mail
We moesten er nog voor zorgen dat we een e-mail zonden vanaf we een password gevonden hadden van de WiFi.
We zijn eerst opzoek gegaan naar python script op het internet. We vonden verschillende repo's met mail scripts. 
Een paar hievan hebben we getest, zonder succes. Op aanraden van Arne Schoonvliet hebben we gewoon het script van vorig jaar gebruikt.
En inderdaad dit script was zeer eenvoudig geschreven en werkte zeer gemakkelijk! We moesten enkel nog een eigen email adres maken voor onze RPi (Email: penpi2.tinnebrecht@gmail.com).

We moesten het nog enkel aanpassen dat het niet het IP adres stuurt maar ons gekraakt wachtwoord. We doen dit door een ons gegeneerd bestand (password.txt) te openen in Python. En de content die hierin staat te verzenden.

> file = open('password.txt', 'r')
> msg = MIMEText(file.read());

We doen dit dus zo, we hebben nu de tekst die in onze file stond in de variable msg staan. Nu zijn we instaat omdit door te sturen via mail. Voor verdere uitleg verwijs ik naar het script, dit is volledig uitgelegd met commentaar.

## Test Ehco Test
Voor de dag om is testen we nog snel een paar zaken die we waarschijnlijk gaan demo'en.

* WiFi script werkt
* MITMf werkt
* HTTPS omzeilen werkt
* Wachtwoorden vinden (webwachtwoorden).

## Brecht Conclusie
TODO

## Tinne Conclusie

## Einde
